name: Release-plz

on:
  push:
    branches:
      - main

permissions:
  contents: write
  pull-requests: write

jobs:
  release-plz:
    uses: loonghao/rust-actions-toolkit/.github/workflows/reusable-release-plz.yml@v3.0.4
    if: github.event.repository.fork == false
    with:
      # Rust toolchain version
      rust-toolchain: stable
    secrets:
      # Required: For crates.io publishing (if you publish Rust crates)
      CARGO_REGISTRY_TOKEN: ${{ secrets.CARGO_REGISTRY_TOKEN }}
      # Enhanced GitHub PAT for cross-workflow triggers
      # This allows release-plz to trigger other workflows (like release.yml)
      RELEASE_PLZ_TOKEN: ${{ secrets.RELEASE_PLZ_TOKEN }}
  